{"data":{"site":{"siteMetadata":{"title":"Rem Lampa: On Web Development, Startups & Film Photography","author":"Rem Lampa"}},"markdownRemark":{"id":"67a3a470-589a-545a-aa3c-5f1989c1f1c9","excerpt":"There will come a point when there’s a piece of JavaScript code that you wrote that often gets used in your projects, and you end up copying and pasting it…","html":"<p>There will come a point when there’s a piece of JavaScript code that you wrote that often gets used in your projects, and you end up copying and pasting it across all projects that need it.</p>\n<p>If you’ve experienced this, I’ve come to tell you that there is definitely a better way of sharing pieces of JavaScript code between your projects: create a local NPM package!</p>\n<h3>TL;DR</h3>\n<p>The code for the NPM package is available at <a href=\"https://github.com/RemLampa/npm-package-tutorial\">https://github.com/RemLampa/npm-package-tutorial</a>.</p>\n<p>For a sample of how to import it into a local project: <a href=\"https://github.com/RemLampa/npm-package-demo\">https://github.com/RemLampa/npm-package-demo</a>.</p>\n<h3>First Things First</h3>\n<p>For the sake of clarity, let me just define a few terms that I used for the remainder of this article:</p>\n<ul>\n<li><code class=\"language-text\">npm package</code> - A library/framework/piece of code that can be shared among any number of JavaScript projects. I will also refer to it as simply <code class=\"language-text\">package</code>.</li>\n<li><code class=\"language-text\">project</code> - Any code that reuses a <code class=\"language-text\">package</code>.</li>\n</ul>\n<p>For this tutorial, we will not do anything wild. The package will just be a simple Node script that will print a simple message on the console.</p>\n<p>I don’t know if this matters, but I’m running Node v.10.15.0 at the time of this writing. So if you run into bugs, you might want to look into that.</p>\n<h3>Setting Up</h3>\n<p>Create two folders, one for the package and another for a sample project that will install and demo the package, and run <code class=\"language-text\">npm init</code> on both of them. Name the package and project folders as <code class=\"language-text\">npm-package-tutorial</code> and <code class=\"language-text\">npm-package-demo</code>, respectively. Optionally, you may also run <code class=\"language-text\">git init</code> to create repositories for each folder.</p>\n<p>Go to the package directory and create a folder named <code class=\"language-text\">src</code>, and inside it create a file named <code class=\"language-text\">index.js</code>.</p>\n<p>Go to the project directory and create a file named <code class=\"language-text\">index.js</code> at the root.</p>\n<h3>Dive into the Code</h3>\n<p>Add the following into <code class=\"language-text\">npm-package-tutorial/src/index.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">printFromPackage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello from package'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> printFromPackage<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Making the Package Available to Local Projects</h3>\n<p>If you’re a masochist like me, you’d probably import the package into <code class=\"language-text\">npm-package-demo/index.js</code> relatively:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> printFromPackage <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../npm-package-tutorial/src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That’s well and good, but what if the file you want the package to import into is several folders deep inside your OS file system? You may end up with the “Dot-Dot Hell”:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> printFromPackage <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../../../../../../../../Documents/projects/npm-package-tutorial/src'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Looks awful, doesn’t it?</p>\n<p>Luckily, NPM (and Yarn) has a utility that allows absolute imports for local packages: <strong>Package Linking</strong>!</p>\n<p>I’ll take a gradual approach in developing the package, hoping that it’ll be easier for you to follow.</p>\n<p>First, let’s edit <code class=\"language-text\">npm-package-demo/index.js</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> printFromPackage <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'npm-package-tutorial'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">printFromPackage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Let’s run the demo:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ node index.js</code></pre></div>\n<p>We’ll be encountering an error similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">internal/modules/cjs/loader.js:583\n    throw err<span class=\"token punctuation\">;</span>\n    ^\n\nError: Cannot <span class=\"token function\">find</span> module <span class=\"token string\">'npm-package-tutorial'</span>\n    at Function.Module._resolveFilename <span class=\"token punctuation\">(</span>internal/modules/cjs/loader.js:581:15<span class=\"token punctuation\">)</span></code></pre></div>\n<p>This is expected since there is no package named <code class=\"language-text\">npm-package-tutorial</code> on the project yet.</p>\n<p>Let’s do that. Open up <code class=\"language-text\">npm-package-demo/package.json</code> and add this under dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"npm-package-tutorial\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Creating a Local Private NPM Package","date":"February 19, 2019"}}},"pageContext":{"slug":"/creating-local-private-npm-package/","previous":{"fields":{"slug":"/fostering-an-inclusive-philippine-startup-community/"},"frontmatter":{"title":"Fostering an Inclusive Philippine Startup Community"}},"next":{"fields":{"slug":"/the-myth-of-changing-the-world/"},"frontmatter":{"title":"The Myth of Changing the World"}}}}